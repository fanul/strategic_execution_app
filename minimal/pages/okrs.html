<div id="okrs-view" class="view-section active">
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">OKR Management</h2>
            <p class="text-muted mb-0">Weekly Objectives and Key Results tracking</p>
        </div>
        <div class="btn-group">
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-calendar-week"></i></span>
                <input type="week" class="form-control" id="okrWeekSelector" onchange="OKRManager.loadWeekOKRs()">
            </div>
            <button class="btn btn-primary" onclick="showModal('okr')">
                <i class="bi bi-plus-circle me-2"></i>New OKR
            </button>
        </div>
    </div>

    <!-- OKR Tabs -->
    <ul class="nav nav-tabs mb-4" id="okrTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="my-okrs-tab" data-bs-toggle="tab" data-bs-target="#my-okrs-panel" type="button">
                <i class="bi bi-person me-2"></i>My OKRs
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="team-okrs-tab" data-bs-toggle="tab" data-bs-target="#team-okrs-panel" type="button">
                <i class="bi bi-people me-2"></i>Team OKRs
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pending-review-tab" data-bs-toggle="tab" data-bs-target="#pending-review-panel" type="button">
                <i class="bi bi-check-circle me-2"></i>Pending Review
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="okr-history-tab" data-bs-toggle="tab" data-bs-target="#okr-history-panel" type="button">
                <i class="bi bi-clock-history me-2"></i>History
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="okr-dashboard-tab" data-bs-toggle="tab" data-bs-target="#okr-dashboard-panel" type="button">
                <i class="bi bi-speedometer2 me-2"></i>Dashboard
            </button>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="okrTabContent">
        <!-- My OKRs Panel -->
        <div class="tab-pane fade show active" id="my-okrs-panel" role="tabpanel">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="bi bi-person me-2"></i>My Weekly OKRs</h5>
                                <button class="btn btn-sm btn-outline-secondary" onclick="OKRManager.loadWeekOKRs()">
                                    <i class="bi bi-arrow-clockwise"></i> Refresh
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="myOKRsContent">
                                <div class="text-center text-muted py-5">
                                    <i class="bi bi-person fs-1"></i>
                                    <p class="mt-3">No OKRs for this week. Click "New OKR" to create one.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-speedometer2 me-2"></i>Week Progress</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-4">
                                <h6 class="small">Overall Progress <span class="float-end" id="okrWeekProgress">0%</span></h6>
                                <div class="progress">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 0%" id="okrWeekProgressBar"></div>
                                </div>
                            </div>
                            <hr>
                            <div class="alert alert-info small">
                                <i class="bi bi-info-circle me-2"></i>
                                OKRs are tracked weekly. Submit your OKRs for review by Friday each week.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Team OKRs Panel -->
        <div class="tab-pane fade" id="team-okrs-panel" role="tabpanel">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-people me-2"></i>Team OKRs</h5>
                        <button class="btn btn-sm btn-outline-secondary" onclick="OKRManager.loadTeamOKRs()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="teamOKRsContent">
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-people fs-1"></i>
                            <p class="mt-3">Loading team OKRs...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pending Review Panel -->
        <div class="tab-pane fade" id="pending-review-panel" role="tabpanel">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-check-circle me-2"></i>OKRs Pending My Review</h5>
                        <button class="btn btn-sm btn-outline-secondary" onclick="OKRManager.loadPendingReviews()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="pendingReviewsContent">
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-check-circle fs-1"></i>
                            <p class="mt-3">Loading pending reviews...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OKR History Panel -->
        <div class="tab-pane fade" id="okr-history-panel" role="tabpanel">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i>OKR History</h5>
                        <button class="btn btn-sm btn-outline-secondary" onclick="OKRManager.loadHistory()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="okrHistoryTable" class="table table-hover w-100">
                            <thead>
                                <tr>
                                    <th>Week</th>
                                    <th>Objective</th>
                                    <th>Key Results</th>
                                    <th>Progress</th>
                                    <th>Status</th>
                                    <th>Submitted By</th>
                                    <th width="120">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" class="text-center">Loading history...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- OKR Dashboard Panel -->
        <div class="tab-pane fade" id="okr-dashboard-panel" role="tabpanel">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-speedometer2 me-2"></i>OKR Performance Dashboard</h5>
                        <button class="btn btn-sm btn-outline-secondary" onclick="OKRManager.loadDashboard()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="okrDashboardContent">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status"></div>
                            <p class="mt-3">Loading dashboard...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals Container -->
<div id="page-modals"></div>

<script src="assets/js/okr_crud.html"></script>
